---
tags:
  - pds
  - os
  - s2
  - 2023-2024
---

# Virtual Memory
## Page Fault
#2024-04-08
[[2. Virtual Memory (ch10).pdf#page=82&selection=0,0,0,9|2. Virtual Memory (ch10), page 82]]
Consider the two-dimensional array A: `int A[][] = new int [100][100];` Where `A[0][0]` is at location 200 in a paged memory system with pages of size 200. A small process that manipulates the matrix resides in page 0 (location 0 to 199). Thus, every instruction fetch will be from page 0. 
- For three-page frames, how many page fault are generated by the following array_initialization loop? Use LRU replacement and assume that page frame 1 contains the process and the other two are initially empty.
$A)$
```c++
int A[][] = new int [100][100];
for (int j = 0; j < 100; j++) 
	for (int i = 0; i < 100; i ++){ 
		A[i][j] = 0; 
	}
}
```
First loop of j (100 loops of i) means 100 different page accesses -> still 100 pages free, on second loop will fill the pages. at this point we are in this situation`A[1][99]`, when continuing
- `A[0][0]` page fault
- `A[2][0]` page fault



$5000$


$B)$
```c++
int B[][] = new int [100][100];
for (int i = 0; i < 100; i++) 
	for (int j = 0; j < 100; j++){ 
		B[i][j] = 0; 
	}
}
```
$50$



## Second chance




the number with the parenthesis ( es $(4_0)$ at the beginning) represent the current cell selected by the algorithm. the bolded is the 
when a new page arrive the bit is 0

| Starting status | 1       | 2       | 4       | 1       | 2       | 3       | 3       |
| --------------- | ------- | ------- | ------- | ------- | ------- | ------- | ------- |
| $(4_0)$         | $(4_0)$ | $2_0$   | $4_0$   | $4_0$   | $4_0$   | $3_0$   | $3_1$   |
| $3_1$           | $3_1$   | $(3_1)$ | $(3_0)$ | $(3_0)$ | $2_0$   | $(2_0)$ | $(2_0)$ |
| $1_0$           | $1_1$   | $1_1$   | $1_0$   | $1_1$   | $(1_1)$ | $1_0$   | $1_0$   |
|                 |         | ❌       | ❌       |         | ❌       | ❌       |         |
continue below because of horizonal limit of obsidian

| 1       | 2       | 4       | 4       |
| ------- | ------- | ------- | ------- |
| $3_1$   | $3_1$   | $3_0$   | $3_0$   |
| $(2_0)$ | $(2_1)$ | $4_0$   | $4_1$   |
| $1_1$   | $1_1$   | $(1_0)$ | $(1_0)$ |
|         |         | ❌       |         |
